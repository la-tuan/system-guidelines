# AWSインフラストラクチャーガイドライン

## 1. はじめに
このガイドラインでは、medibaにおける、AWSを使用したサービス向けクラウドインフラストラクチャーを構築する際のガイドラインを下記の大項目に分け、それぞれ定めます。

- 主管部署
- アカウント制限
- アクセス制限
- OSの選定
- インフラストラクチャーの構成レビュー
- サービスにおいて必要な監視項目
- 需要予測と拡張性の担保
- 可用性の担保
- コスト計画
- ドメインの管理、運用
- SSL証明書の管理、運用

## 2. 主管部署

クラウドインフラストラクチャの主管部署は、システム本部インフラストラクチャー部とします。

## 3. アカウント制限
### 3.1. IAMアカウントの制限

- IAMアカウントは各個人ごとに発行し、共通ユーザは原則として作成しません。
- アプリケーションの仕様上、専用のユーザが必要な場合は必要に応じて発行しますが、操作出来る権限は適切な権限にするものとします。
- 各IAMアカウントにはMFA(多要素認証デバイス)を必ず紐付け、MFAを使用してログインすることとします。
- IAMアカウントの新規作成/削除/権限変更は、依頼の元インフラストラクチャー部が実施します。
- 派遣/業務委託者に対する商用環境の操作権限付与は、システム本部長の承認を得るものとします。

### 3.2. OSアカウントの制限

- OSアカウントの新規作成/削除は、依頼の元インフラストラクチャー部が実施します。
- OSアカウントは各個人ごとに発行し、共通ユーザは原則として作成しません。
- デプロイやプロビジョニング用のユーザに関しては、個別に検討の上作成する場合があります。
- 各ユーザにはパスワードを設定することとします。
- サーバへのログインは鍵認証を使用することとします。

## 4. アクセス制限
### 4.1. セキュリティグループの作成ポリシー

- 原則全てのトラフィックを拒否し、必要なものだけ許可をするホワイトリスト方式とします。
- 必要な場合を除いて、0.0.0.0/0(IP制限なし)のセキュリティグループとすることは禁止とします。

## 5. OSの選定
### 5.1. 使用できるOS

- 原則的にAmazonLinuxを使用することとします。
- 必要な場合に限り、個別に検討の上他のOSを使用する場合があります。

## 6. インフラストラクチャーの構成レビュー
### 6.1. レビューの内容
### 6.2. 構成レビュー実施のタイミング

## 7. サービスにおいて必要な監視項目
### 7.1. 最低限監視すべき項目

## 8. 需要予測と拡張性の担保

## 9. 可用性の担保
### 9.1. 冗長化の方針

## 10. コスト計画

## 11. ドメイン管理、運用

## 12. SSL証明書の管理、運用
