# medibaシステムガイドライン

<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->


- [本ガイドラインの歩き方](#%E6%9C%AC%E3%82%AC%E3%82%A4%E3%83%89%E3%83%A9%E3%82%A4%E3%83%B3%E3%81%AE%E6%AD%A9%E3%81%8D%E6%96%B9)
- [はじめに](#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB)
- [開発する前に考慮するべき事項](#%E9%96%8B%E7%99%BA%E3%81%99%E3%82%8B%E5%89%8D%E3%81%AB%E8%80%83%E6%85%AE%E3%81%99%E3%82%8B%E3%81%B9%E3%81%8D%E4%BA%8B%E9%A0%85)
  - [品質管理プロセスの遵守](#%E5%93%81%E8%B3%AA%E7%AE%A1%E7%90%86%E3%83%97%E3%83%AD%E3%82%BB%E3%82%B9%E3%81%AE%E9%81%B5%E5%AE%88)
  - [機能の共有](#%E6%A9%9F%E8%83%BD%E3%81%AE%E5%85%B1%E6%9C%89)
  - [性能要件とアーキテクチャ](#%E6%80%A7%E8%83%BD%E8%A6%81%E4%BB%B6%E3%81%A8%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3)
  - [移行要件の可否](#%E7%A7%BB%E8%A1%8C%E8%A6%81%E4%BB%B6%E3%81%AE%E5%8F%AF%E5%90%A6)
  - [取り扱うサービスの要件](#%E5%8F%96%E3%82%8A%E6%89%B1%E3%81%86%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%81%AE%E8%A6%81%E4%BB%B6)
  - [ソースコードマネジメント](#%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89%E3%83%9E%E3%83%8D%E3%82%B8%E3%83%A1%E3%83%B3%E3%83%88)
- [日常的に注意する事項](#%E6%97%A5%E5%B8%B8%E7%9A%84%E3%81%AB%E6%B3%A8%E6%84%8F%E3%81%99%E3%82%8B%E4%BA%8B%E9%A0%85)
  - [パスワードの強度](#%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%81%AE%E5%BC%B7%E5%BA%A6)
  - [利用するアプリケーション](#%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3)
  - [その他注意事項](#%E3%81%9D%E3%81%AE%E4%BB%96%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A0%85)
- [開発前に読むべきもの](#%E9%96%8B%E7%99%BA%E5%89%8D%E3%81%AB%E8%AA%AD%E3%82%80%E3%81%B9%E3%81%8D%E3%82%82%E3%81%AE)
- [業務別ガイドライン](#%E6%A5%AD%E5%8B%99%E5%88%A5%E3%82%AC%E3%82%A4%E3%83%89%E3%83%A9%E3%82%A4%E3%83%B3)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

## 本ガイドラインの歩き方

本ガイドラインは、IPA、OWASP、KDDI要求事項(セキュリティ関連のチェックリスト)や当社の品質チェックリストを参考にまとめたものとなっており、現在アプリケーション開発において開発者が考えて然るべき内容となっております。
システムの特性に合わせて、関わるシステム開発に必要な要素を参考にして本ガイドラインを適用して下さい。

- 当社では本ガイドラインに沿った開発を前提とするため、必ず一通り読むこと
   - 何が書かれていて、どのようなことにケアすべきかを確認する
   -当社での過去の事例から得たナレッジを把握する
   - IPA、OWASP、もしくはKDDIが定めている遵守すべき事項を理解する
- 新規開発、大規模改修など開発方針としてチーム内で確認する
   - 特に個人情報の扱い、セキュリティ関連は原則ガイドラインに従う
   - 設計前やリリース前に考慮漏れがないかチェック項目として活用する
- 本ガイドラインは適宜内容を更新していくため、更新内容は必ず確認する

## はじめに

当社のサービスが社会に与える影響を重要視しており、そのサービスを支えるシステムは、安全で、高品質なものを提供することがシステムに携わる人の責務です。
このガイドラインでは、当社において、システム開発・運用をする上で、システムに携わる皆さんに理解していただき、守っていただきたい事項を定めます。
ここに述べられている項目以外でも、システムに携わる皆さんは、常日頃から様々な情報に触れ、技術や能力の向上と、品質の維持に努めてください。

## 開発する前に考慮するべき事項

### 品質管理プロセスの遵守

過去の障害事例から得たナレッジで品質管理プロセスが成り立っています。
各チェック項目、レビュー、承認の遵守をお願いします。

### 機能の共有

- 提供していく機能や画面が関係者間で認識齟齬が発生しないように管理すること
  - ログイン有無、キャッシュ有無、URL、APIエンドポイントなどを明記する
  - アドや計測タグなどの利用を明らかにする
  - 特定のユーザーのみに提供する機能や出し分けがあれば明記する
- 作成されたドキュメントは適切にアップデートを行ない、改修の際に漏れが発生しないようにすること

### 性能要件とアーキテクチャ

- 満たすべきレスポンス、パフォーマンスを事前に想定すること
- 原則、DBアクセスを極力少なくするような仕組みとすること （キャッシュを最大限活用＆キャッシュの冗長構成）
- 今後のアクセス増、データボリューム増を考慮したスケーラビリティを検討すること(スケールアップ、スケールアウト)
- Disaster Recovery(災害対策)を考慮したシステム構成を検討すること
- バーストした際の対応、バーストしないための予防策について検討すること
- DBはサービス規模や仕様などにより用途を分け、最適な構成を検討すること
- サービスをクローズする場合も考慮してアーキテクチャを検討しているか

### 移行要件の可否

- 移行データの有無、移行ツールの作成要否、移行時のシステム停止、データ整備の有無など、設計・開発のスケジュール・工数にインパクトのある内容、切替時に留意しなければいけない移行要件がないかを確認しておくこと

### 取り扱うサービスの要件

取り扱うサービスの要件を確認し、強化すべき機能を明確にしレビューポイントを設ける
- 個人情報の取り扱い有無
- 決済・ポイントの取り扱い有無
- SLAを含む非機能要件


### ソースコードマネジメント

- プロダクト資産は、github(Organizationで契約中)のプライベートリポジトリで管理すること
- 原則GitHub Flowやgit-flowを利用するが、PJ規模やリリースサイクルなどによってチームで最適化していき、どういうフローで回っているかはREADMEで明文化しチーム共通認識として持つ

## 日常的に注意する事項

### パスワードの強度

- トークンや、公開鍵認証など、多要素認証を受け入れるシステムは、積極的に使用
- パスワードは、「英単語」＋「記号 or 数字」＋「システム識別子」で作成すると長いものでも覚えやすい

### 利用するアプリケーション

- ChromeやFirefoxのアプリは脆弱性を埋め込まれる可能性が高いため、利用には十分の注意を払う
- Adobe製品やOffice製品は脆弱性を仕込まれることが多いため、アップデートは必須

### その他注意事項

- メールにあるリンクのクリック、添付ファイルを実行する際は極力注意すること
    - 送られてきた人のメールアドレスを注意深く読み解く
    - 普段のメールの文言や職務タイトルと異なる場合などは注意
- オフィス以外で業務をする場合は、
 - 端末を外部に持ち出す場合は持ち出し用端末を利用すること
 - 端末を常に持ちあるくこと（トイレも携行）
 - パスワード付きスクリーンセーバーにすること
 - WiFiへの接続の際は、信頼できる業者のものを利用すること（有料がベター）

## 開発前に読むべきもの

- [IPA 安全なウェブサイトの作り方](https://www.ipa.go.jp/security/vuln/websecurity.html)
- [IPA セキュリティ・プログラミング講座](https://www.ipa.go.jp/security/awareness/vendor/programmingv2/index.html)
- [セキュリティチェックリスト](SecurityCheckList.md)

## 業務別ガイドライン

- [アプリケーション開発ガイドライン](AppDeveloperGuideline.md)
- [AWSインフラストラクチャーガイドライン](AWSInfraBuildGuideline.md)
- [セキュリティガイドライン](SecurityGuideline.md)
- [テストガイドライン](TestGuideline.md)
- [アプリケーションログガイドライン](AppLogGuideline.md)
- [リリースガイドライン](ReleaseGuideline.md)
- [システム運用ガイドライン](OpsGuideline.md)
- [外注開発ガイドライン](OutsouceDevelopmentGuideline.md)
